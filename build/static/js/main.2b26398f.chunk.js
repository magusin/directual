(this["webpackJsonprehearsal-app"]=this["webpackJsonprehearsal-app"]||[]).push([[0],{38:function(e,t,a){e.exports=a(77)},43:function(e,t,a){},70:function(e,t,a){},75:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),c=a(11),r=a.n(c),u=a(35),o=(a(43),a(4)),s=a(10),i=a(3),m=a(14),E=a.n(m),b=new E.a({apiHost:"/"}),d=Object(n.createContext)();function p(e){var t=e.children,a=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(null),r=Object(i.a)(c,2),u=r[0],o=r[1],s=Object(n.useState)(null),m=Object(i.a)(s,2),E=m[0],d=m[1];return Object(n.useEffect)((function(){var e=window.localStorage.getItem("sid")||"";b.auth.isAuthorize(e,(function(e,t){!0===e&&(l(t.username),o(t.token),d(t.role))}))}),[]),{user:a,sessionID:u,login:function(e,t){return b.auth.login(e,t).then((function(e){l(e.username),o(e.sessionID),d(e.role),window.localStorage.setItem("sid",e.sessionID)}))},isAutorised:function(){return!!a},signout:function(e){return b.auth.logout("").then((function(t){l(null),d(null),o(null),window.localStorage.setItem("sid",null),e()}))},hasRole:function(e){if(!e)return!0;return E===e}}}();return l.a.createElement(d.Provider,{value:a},t)}var f=function(){return Object(n.useContext)(d)};a(70);function g(e){return l.a.createElement("div",{className:"loader-wrapper"},l.a.createElement("div",{className:"loader"}),l.a.createElement("span",{className:"loader-text"},e.text||"Loading..."))}function h(){var e=Object(o.g)(),t=f(),a=Object(n.useState)(!1),c=Object(i.a)(a,2),r=c[0],u=c[1];return Object(n.useEffect)((function(){u(!1)}),[t.user]),l.a.createElement(l.a.Fragment,null,t.user?l.a.createElement(l.a.Fragment,null,r?l.a.createElement(g,{text:"Logging out..."}):l.a.createElement("button",{onClick:function(){t.signout((function(){return e.push("/")})),u(!0)}},"Log out")):l.a.createElement(s.b,{to:"/login"},l.a.createElement("button",null,"Log in")))}a(75);function O(){var e=f();return l.a.createElement("ul",{className:"main-menu"},l.a.createElement("li",null,l.a.createElement(s.c,{exact:!0,to:"/"},"Home")),l.a.createElement("li",null,l.a.createElement(s.c,{exact:!0,to:"/page2"},"Post data")),e.isAutorised()&&l.a.createElement("li",null,l.a.createElement(s.c,{exact:!0,to:"/private"},"Private Page")),e.hasRole("admin")&&l.a.createElement("li",null,l.a.createElement(s.c,{exact:!0,to:"/admin"},"Admin Page")),l.a.createElement("li",{className:"rihgt-top"},l.a.createElement(h,null)))}var j=a(13),v=new E.a({apiHost:"/"});function S(){var e=f(),t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],r=a[1],u=Object(n.useState)({}),o=Object(i.a)(u,2),s=o[0],m=o[1],E=Object(n.useState)(!0),b=Object(i.a)(E,2),d=b[0],p=b[1],h=Object(n.useState)(),O=Object(i.a)(h,2),S=O[0],x=O[1],w=Object(n.useState)(!1),N=Object(i.a)(w,2),y=N[0],A=N[1],I=Object(n.useState)(0),C=Object(i.a)(I,2),D=C[0],P=C[1],R=Object(n.useState)(2),k=Object(i.a)(R,2),L=k[0];k[1];Object(n.useEffect)((function(){A(!0),v.structure("article").getData("getArticles",{sessionID:e.sessionID,page:D,pageSize:L}).then((function(e){r(e.payload),m(e.pageInfo),p(!1),A(!1)})).catch((function(e){p(!1),A(!1),console.log(e.response),x(e.response.status+", "+e.response.data.msg)}))}),[D]);return l.a.createElement("div",{className:"content"},l.a.createElement("h1",null,"Annonces"),d&&l.a.createElement(g,null),c&&!d&&l.a.createElement("div",null,l.a.createElement(j.f,null,c.map((function(e){return l.a.createElement(j.a,{className:"border-1 border-primary text-center mb-2 ",key:e.id},l.a.createElement(j.c,null,l.a.createElement(j.e,null,l.a.createElement("h3",null,e.title))),l.a.createElement(j.b,null,l.a.createElement("img",{src:e.file,className:"image"}),l.a.createElement(j.d,null,l.a.createElement("p",null,e.description))))}))),y&&l.a.createElement(g,null),!y&&l.a.createElement("div",null,l.a.createElement("button",{disabled:D<=0&&"disabled",onClick:function(){A(!0),P(D-1)}},"prev"),l.a.createElement("button",{disabled:(S||D>=s.totalPage-1)&&"disabled",onClick:function(){A(!0),P(D+1)}},"next"))))}var x=a(17),w=new E.a({apiHost:"/"});function N(){var e=f(),t=Object(n.useState)(),a=Object(i.a)(t,2),c=a[0],r=a[1],u=Object(n.useState)(),o=Object(i.a)(u,2),s=o[0],m=o[1],E=Object(n.useState)(),b=Object(i.a)(E,2),d=b[0],p=b[1],h=Object(n.useState)(!1),O=Object(i.a)(h,2),j=O[0],v=O[1],S=Object(n.useState)(!0),N=Object(i.a)(S,2),y=N[0],A=N[1],I=Object(n.useState)({}),C=Object(i.a)(I,2),D=C[0],P=C[1];return l.a.createElement("div",{className:"content"},l.a.createElement("h1",null,"Example of posting data"),j&&l.a.createElement(g,null),y&&l.a.createElement("form",{onSubmit:function(){v(!0),A(!1),w.structure("").setData("",D,{sessionID:e.sessionID}).then((function(e){r(e.result),m(e.status),v(!1)})).catch((function(e){v(!1),console.log(e.response),p({httpCode:e.response.status,msg:e.response.data.msg})}))}},l.a.createElement("input",{type:"text",onChange:function(e){P(Object(x.a)(Object(x.a)({},D),{},{FIELD_SYSNAME:e.target.value}))}}),l.a.createElement("button",{type:"submit"},"Submit")),c&&l.a.createElement("div",null,l.a.createElement("b",null,"Submitted successfully"),l.a.createElement("p",null,"Response: ",l.a.createElement("code",null,JSON.stringify(c))),s&&l.a.createElement("p",null,"Status: ",l.a.createElement("code",null,JSON.stringify(s)))),d&&l.a.createElement("div",{class:"error"},l.a.createElement("b",null,d.httpCode," error"),"400"==d.httpCode&&l.a.createElement("p",null,"API-endpoint is not configured properly."),"403"==d.httpCode&&l.a.createElement("p",null,"You have to be logged in to submit this form."),l.a.createElement("p",null,l.a.createElement("code",null,d.msg))),!y&&!j&&l.a.createElement("button",{onClick:function(){r(),m(),p(),A(!0),P({})}},"Submit again"))}function y(){var e=f();return l.a.createElement("div",{className:"content"},l.a.createElement("h1",null,"Page with hidden content"),l.a.createElement("p",null,"This is ",l.a.createElement("b",null,"public")," content. Try to login and see some hidden text!"),e.isAutorised()&&l.a.createElement("p",null,"This content is visible for ",l.a.createElement("b",null,"authorised users only")),e.hasRole("admin")&&l.a.createElement("p",null,"This content is visible for a user with a ",l.a.createElement("b",null,"acertain role")))}function A(){return l.a.createElement("div",{className:"content"},l.a.createElement("h1",null,"Private Page"))}function I(){return l.a.createElement("div",{className:"content"},l.a.createElement("h1",null,"Admin Page"))}function C(){var e=Object(o.g)(),t=Object(o.h)(),a=Object(n.useState)(""),c=Object(i.a)(a,2),r=c[0],u=c[1],s=Object(n.useState)(""),m=Object(i.a)(s,2),E=m[0],b=m[1],d=Object(n.useState)(!1),p=Object(i.a)(d,2),h=p[0],O=p[1],j=Object(n.useState)(""),v=Object(i.a)(j,2),S=v[0],x=v[1],w=(t.state||{from:{pathname:"/"}}).from,N=f();Object(n.useEffect)((function(){N.isAutorised()&&e.replace(w)}));return l.a.createElement("div",{className:"content form"},l.a.createElement("form",{onSubmit:function(t){return t.preventDefault(),O(!0),N.login(r,E).then((function(){e.replace(w),O(!1)})).catch((function(e){x("You login or password is incorrect"),O(!1)})),!1}},l.a.createElement("p",null,"You must log in to view the page ",l.a.createElement("b",null,w.pathname)),l.a.createElement("input",{type:"text",placeholder:"login",onChange:function(e){u(e.target.value)}}),l.a.createElement("input",{type:"password",placeholder:"password",onChange:function(e){b(e.target.value)}}),S&&l.a.createElement("div",{className:"error"},S),h?l.a.createElement(g,{text:"Logging in..."}):l.a.createElement("button",null,"Log in")))}var D=["children","hasRole"];function P(e){var t=e.children,a=e.hasRole,n=Object(u.a)(e,D),c=f();return l.a.createElement(o.b,Object.assign({},n,{render:function(e){var n=e.location;return c.isAutorised()&&c.hasRole(a)?t:c.isAutorised()&&!c.hasRole(a)?l.a.createElement("div",null,"Access denied"):l.a.createElement(o.a,{to:{pathname:"/login",state:{from:n}}})}}))}function R(){return l.a.createElement(p,null,l.a.createElement(s.a,null,l.a.createElement(O,null),l.a.createElement(o.d,null,l.a.createElement(o.b,{path:"/login"},l.a.createElement(C,null)),l.a.createElement(o.b,{exact:!0,path:"/"},l.a.createElement(S,null)),l.a.createElement(o.b,{exact:!0,path:"/page2"},l.a.createElement(N,null)),l.a.createElement(o.b,{exact:!0,path:"/page3"},l.a.createElement(y,null)),l.a.createElement(P,{path:"/private"},l.a.createElement(A,null)),l.a.createElement(P,{path:"/admin",hasRole:"admin"},l.a.createElement(I,null)))))}a(76);r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(R,null)),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.2b26398f.chunk.js.map