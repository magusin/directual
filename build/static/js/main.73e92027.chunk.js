(this["webpackJsonprehearsal-app"]=this["webpackJsonprehearsal-app"]||[]).push([[0],{37:function(e,t,a){e.exports=a(75)},42:function(e,t,a){},69:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),c=a(10),r=a.n(c),u=a(34),o=(a(42),a(3)),i=a(11),s=a(4),m=a(14),E=a.n(m),d=new E.a({apiHost:"/"}),b=Object(n.createContext)();function f(e){var t=e.children,a=function(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(null),r=Object(s.a)(c,2),u=r[0],o=r[1],i=Object(n.useState)(null),m=Object(s.a)(i,2),E=m[0],b=m[1];return Object(n.useEffect)((function(){var e=window.localStorage.getItem("sid")||"";d.auth.isAuthorize(e,(function(e,t){!0===e&&(l(t.username),o(t.token),b(t.role))}))}),[]),{user:a,sessionID:u,login:function(e,t){return d.auth.login(e,t).then((function(e){l(e.username),o(e.sessionID),b(e.role),window.localStorage.setItem("sid",e.sessionID)}))},isAutorised:function(){return!!a},signout:function(e){return d.auth.logout("").then((function(t){l(null),b(null),o(null),window.localStorage.setItem("sid",null),e()}))},hasRole:function(e){if(!e)return!0;return E===e}}}();return l.a.createElement(b.Provider,{value:a},t)}var g=function(){return Object(n.useContext)(b)};a(69);function p(e){return l.a.createElement("div",{className:"loader-wrapper"},l.a.createElement("div",{className:"loader"}),l.a.createElement("span",{className:"loader-text"},e.text||"Loading..."))}function h(){var e=Object(o.g)(),t=g(),a=Object(n.useState)(!1),c=Object(s.a)(a,2),r=c[0],u=c[1];return Object(n.useEffect)((function(){u(!1)}),[t.user]),l.a.createElement(l.a.Fragment,null,t.user?l.a.createElement(l.a.Fragment,null,r?l.a.createElement(p,{text:"Logging out..."}):l.a.createElement("button",{onClick:function(){t.signout((function(){return e.push("/")})),u(!0)}},"Log out")):l.a.createElement(i.b,{to:"/login"},l.a.createElement("button",null,"Log in")))}a(74);function j(){var e=g();return l.a.createElement("ul",{className:"main-menu"},l.a.createElement("li",null,l.a.createElement(i.c,{exact:!0,to:"/"},"Home")),e.isAutorised()&&l.a.createElement("li",null,l.a.createElement(i.c,{exact:!0,to:"/private"},"Private Page")),e.hasRole("admin")&&l.a.createElement("li",null,l.a.createElement(i.c,{exact:!0,to:"/admin"},"Admin Page")),l.a.createElement("li",{className:"rihgt-top"},l.a.createElement(h,null)))}var O=a(13),v=new E.a({apiHost:"/"});function S(){var e=g(),t=Object(n.useState)([]),a=Object(s.a)(t,2),c=a[0],r=a[1],u=Object(n.useState)({}),o=Object(s.a)(u,2),i=o[0],m=o[1],E=Object(n.useState)(!0),d=Object(s.a)(E,2),b=d[0],f=d[1],h=Object(n.useState)(),j=Object(s.a)(h,2),S=j[0],w=j[1],x=Object(n.useState)(!1),N=Object(s.a)(x,2),A=N[0],I=N[1],P=Object(n.useState)(0),k=Object(s.a)(P,2),C=k[0],D=k[1],R=Object(n.useState)(2),y=Object(s.a)(R,1)[0];Object(n.useEffect)((function(){I(!0),v.structure("article").getData("getArticles",{sessionID:e.sessionID,page:C,pageSize:y}).then((function(e){r(e.payload),m(e.pageInfo),f(!1),I(!1)})).catch((function(e){f(!1),I(!1),console.log(e.response),w(e.response.status+", "+e.response.data.msg)}))}),[C]);return l.a.createElement("div",{className:"content"},l.a.createElement("h1",null,"Annonces"),b&&l.a.createElement(p,null),c&&!b&&l.a.createElement("div",null,l.a.createElement(O.f,null,c.map((function(e){return l.a.createElement(O.a,{className:"border-1 border-primary text-center mb-2 ",key:e.id},l.a.createElement(O.c,null,l.a.createElement(O.e,null,l.a.createElement("h3",null,e.title))),l.a.createElement(O.b,null,l.a.createElement("img",{alt:"none",src:e.file,className:"image"}),l.a.createElement(O.d,null,l.a.createElement("p",null,e.description))))}))),A&&l.a.createElement(p,null),!A&&l.a.createElement("div",null,l.a.createElement("button",{disabled:C<=0&&"disabled",onClick:function(){I(!0),D(C-1)}},"prev"),l.a.createElement("button",{disabled:(S||C>=i.totalPage-1)&&"disabled",onClick:function(){I(!0),D(C+1)}},"next"))))}function w(){return l.a.createElement("div",{className:"content"},l.a.createElement("h1",null,"Private Page"))}function x(){return l.a.createElement("div",{className:"content"},l.a.createElement("h1",null,"Admin Page"))}function N(){var e=Object(o.g)(),t=Object(o.h)(),a=Object(n.useState)(""),c=Object(s.a)(a,2),r=c[0],u=c[1],i=Object(n.useState)(""),m=Object(s.a)(i,2),E=m[0],d=m[1],b=Object(n.useState)(!1),f=Object(s.a)(b,2),h=f[0],j=f[1],O=Object(n.useState)(""),v=Object(s.a)(O,2),S=v[0],w=v[1],x=(t.state||{from:{pathname:"/"}}).from,N=g();Object(n.useEffect)((function(){N.isAutorised()&&e.replace(x)}));return l.a.createElement("div",{className:"content form"},l.a.createElement("form",{onSubmit:function(t){return t.preventDefault(),j(!0),N.login(r,E).then((function(){e.replace(x),j(!1)})).catch((function(e){w("You login or password is incorrect"),j(!1)})),!1}},l.a.createElement("p",null,"You must log in to view the page ",l.a.createElement("b",null,x.pathname)),l.a.createElement("input",{type:"text",placeholder:"login",onChange:function(e){u(e.target.value)}}),l.a.createElement("input",{type:"password",placeholder:"password",onChange:function(e){d(e.target.value)}}),S&&l.a.createElement("div",{className:"error"},S),h?l.a.createElement(p,{text:"Logging in..."}):l.a.createElement("button",null,"Log in")))}var A=["children","hasRole"];function I(e){var t=e.children,a=e.hasRole,n=Object(u.a)(e,A),c=g();return l.a.createElement(o.b,Object.assign({},n,{render:function(e){var n=e.location;return c.isAutorised()&&c.hasRole(a)?t:c.isAutorised()&&!c.hasRole(a)?l.a.createElement("div",null,"Access denied"):l.a.createElement(o.a,{to:{pathname:"/login",state:{from:n}}})}}))}function P(){return l.a.createElement(f,null,l.a.createElement(i.a,null,l.a.createElement(j,null),l.a.createElement(o.d,null,l.a.createElement(o.b,{path:"/login"},l.a.createElement(N,null)),l.a.createElement(o.b,{exact:!0,path:"/"},l.a.createElement(S,null)),l.a.createElement(I,{path:"/private"},l.a.createElement(w,null)),l.a.createElement(I,{path:"/admin",hasRole:"admin"},l.a.createElement(x,null)))))}r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(P,null)),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.73e92027.chunk.js.map