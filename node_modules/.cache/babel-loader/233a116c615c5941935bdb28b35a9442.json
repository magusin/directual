{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Hugo\\\\code\\\\akatek\\\\directual\\\\directual-react-boilerplate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import{useHistory,useLocation}from'react-router-dom';import React,{useState,useEffect}from'react';import{useAuth}from'../auth';import{Loader}from'../components/loader/loader';export default function LoginPage(){var history=useHistory();var location=useLocation();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var _ref=location.state||{from:{pathname:'/'}},from=_ref.from;var auth=useAuth();useEffect(function(){if(auth.isAutorised()){history.replace(from);}});var login=function login(e){e.preventDefault();setLoading(true);auth.login(username,password).then(function(){history.replace(from);setLoading(false);}).catch(function(e){setError('You login or password is incorrect');setLoading(false);});return false;};return/*#__PURE__*/React.createElement(\"div\",{className:\"content form\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:login},/*#__PURE__*/React.createElement(\"p\",null,\"You must log in to view the page \",/*#__PURE__*/React.createElement(\"b\",null,from.pathname)),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"login\",onChange:function onChange(e){setUsername(e.target.value);}}),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",placeholder:\"password\",onChange:function onChange(e){setPassword(e.target.value);}}),error&&/*#__PURE__*/React.createElement(\"div\",{className:\"error\"},error),!loading?/*#__PURE__*/React.createElement(\"button\",null,\"Log in\"):/*#__PURE__*/React.createElement(Loader,{text:\"Logging in...\"})));}","map":{"version":3,"sources":["C:/Users/Hugo/code/akatek/directual/directual-react-boilerplate/src/pages/login.js"],"names":["useHistory","useLocation","React","useState","useEffect","useAuth","Loader","LoginPage","history","location","username","setUsername","password","setPassword","loading","setLoading","error","setError","state","from","pathname","auth","isAutorised","replace","login","e","preventDefault","then","catch","target","value"],"mappings":"iMAAA,OAASA,UAAT,CAAqBC,WAArB,KAAwC,kBAAxC,CACA,MAAOC,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,OAAT,KAAwB,SAAxB,CAEA,OAASC,MAAT,KAAuB,6BAAvB,CAEA,cAAe,SAASC,CAAAA,SAAT,EAAsB,CACnC,GAAIC,CAAAA,OAAO,CAAGR,UAAU,EAAxB,CACA,GAAIS,CAAAA,QAAQ,CAAGR,WAAW,EAA1B,CAEA,cAAgCE,QAAQ,CAAC,EAAD,CAAxC,wCAAOO,QAAP,eAAiBC,WAAjB,eACA,eAAgCR,QAAQ,CAAC,EAAD,CAAxC,yCAAOS,QAAP,eAAiBC,WAAjB,eACA,eAA8BV,QAAQ,CAAC,KAAD,CAAtC,yCAAOW,OAAP,eAAgBC,UAAhB,eACA,eAA0BZ,QAAQ,CAAC,EAAD,CAAlC,yCAAOa,KAAP,eAAcC,QAAd,eAEA,SAAeR,QAAQ,CAACS,KAAT,EAAkB,CAAEC,IAAI,CAAE,CAAEC,QAAQ,CAAE,GAAZ,CAAR,CAAjC,CAAMD,IAAN,MAAMA,IAAN,CACA,GAAME,CAAAA,IAAI,CAAGhB,OAAO,EAApB,CAEAD,SAAS,CAAC,UAAM,CACd,GAAIiB,IAAI,CAACC,WAAL,EAAJ,CAAwB,CACtBd,OAAO,CAACe,OAAR,CAAgBJ,IAAhB,EACD,CACF,CAJQ,CAAT,CAKA,GAAIK,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACC,CAAD,CAAO,CACjBA,CAAC,CAACC,cAAF,GACAX,UAAU,CAAC,IAAD,CAAV,CACAM,IAAI,CAACG,KAAL,CAAWd,QAAX,CAAqBE,QAArB,EAA+Be,IAA/B,CAAoC,UAAM,CACxCnB,OAAO,CAACe,OAAR,CAAgBJ,IAAhB,EACAJ,UAAU,CAAC,KAAD,CAAV,CACD,CAHD,EAGGa,KAHH,CAGS,SAAAH,CAAC,CAAI,CACZR,QAAQ,CAAC,oCAAD,CAAR,CACAF,UAAU,CAAC,KAAD,CAAV,CACD,CAND,EAOA,MAAO,MAAP,CACD,CAXD,CAaA,mBACE,2BAAK,SAAS,CAAC,cAAf,eAEE,4BAAM,QAAQ,CAAES,KAAhB,eACE,8EAAoC,6BAAIL,IAAI,CAACC,QAAT,CAApC,CADF,cAEE,6BAAO,IAAI,CAAC,MAAZ,CAAmB,WAAW,CAAC,OAA/B,CAAuC,QAAQ,CAAE,kBAACK,CAAD,CAAO,CACtDd,WAAW,CAACc,CAAC,CAACI,MAAF,CAASC,KAAV,CAAX,CACD,CAFD,EAFF,cAKE,6BAAO,IAAI,CAAC,UAAZ,CAAuB,WAAW,CAAC,UAAnC,CAA8C,QAAQ,CAAE,kBAACL,CAAD,CAAO,CAC7DZ,WAAW,CAACY,CAAC,CAACI,MAAF,CAASC,KAAV,CAAX,CACD,CAFD,EALF,CAQGd,KAAK,eAAI,2BAAK,SAAS,CAAC,OAAf,EAAwBA,KAAxB,CARZ,CASG,CAACF,OAAD,cAAW,2CAAX,cAAqC,oBAAC,MAAD,EAAQ,IAAI,CAAC,eAAb,EATxC,CAFF,CADF,CAgBD","sourcesContent":["import { useHistory, useLocation } from 'react-router-dom'\r\nimport React, { useState, useEffect } from 'react'\r\nimport { useAuth } from '../auth'\r\n\r\nimport { Loader } from '../components/loader/loader'\r\n\r\nexport default function LoginPage () {\r\n  let history = useHistory()\r\n  let location = useLocation()\r\n\r\n  const [username, setUsername] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [loading, setLoading] = useState(false)\r\n  const [error, setError] = useState('')\r\n\r\n  let { from } = location.state || { from: { pathname: '/' } }\r\n  const auth = useAuth()\r\n\r\n  useEffect(() => {\r\n    if (auth.isAutorised()) {\r\n      history.replace(from)\r\n    }\r\n  })\r\n  let login = (e) => {\r\n    e.preventDefault()\r\n    setLoading(true)\r\n    auth.login(username, password).then(() => {\r\n      history.replace(from)\r\n      setLoading(false)\r\n    }).catch(e => {\r\n      setError('You login or password is incorrect')\r\n      setLoading(false)\r\n    })\r\n    return false\r\n  }\r\n\r\n  return (\r\n    <div className=\"content form\">\r\n      { /* Here is from path: */}\r\n      <form onSubmit={login}>\r\n        <p>You must log in to view the page <b>{from.pathname}</b></p>\r\n        <input type=\"text\" placeholder=\"login\" onChange={(e) => {\r\n          setUsername(e.target.value)\r\n        }}/>\r\n        <input type=\"password\" placeholder=\"password\" onChange={(e) => {\r\n          setPassword(e.target.value)\r\n        }}/>\r\n        {error && <div className=\"error\">{error}</div>}\r\n        {!loading ? <button>Log in</button> : <Loader text='Logging in...'/>}\r\n      </form>\r\n    </div>\r\n  )\r\n}"]},"metadata":{},"sourceType":"module"}