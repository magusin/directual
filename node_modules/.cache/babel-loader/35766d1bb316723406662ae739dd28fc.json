{"ast":null,"code":"import _objectWithoutProperties from\"C:\\\\Users\\\\Hugo\\\\code\\\\akatek\\\\directual\\\\directual-react-boilerplate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";var _excluded=[\"children\",\"hasRole\"];import React from'react';import'./App.css';import{BrowserRouter as Router,Switch,Route,Redirect,NavLink,useHistory,useLocation}from'react-router-dom';import{MainMenu}from'./components/menu/menu';import{ProvideAuth,useAuth,authContext}from'./auth';import Page1 from'./pages/Page1';import Page2 from'./pages/Page2';import Page3 from'./pages/Page3';import PrivatePage from'./pages/PrivatePage';import AdminPage from'./pages/AdminPage';import LoginPage from'./pages/login';function PrivateRoute(_ref){var children=_ref.children,hasRole=_ref.hasRole,rest=_objectWithoutProperties(_ref,_excluded);var auth=useAuth();return/*#__PURE__*/React.createElement(Route,Object.assign({},rest,{render:function render(_ref2){var location=_ref2.location;return auth.isAutorised()&&auth.hasRole(hasRole)?children:auth.isAutorised()&&!auth.hasRole(hasRole)?/*#__PURE__*/React.createElement(\"div\",null,\"Access denied\"):/*#__PURE__*/React.createElement(Redirect,{to:{pathname:'/login',state:{from:location}}});}}));}// This is for pages like your.app/books/the-bible, wthere 'the-bible' in nan Object ID\n// \n// const Child = ({ match }) => {\n//   return (\n//   <div>Object ID: {match.params.id}</div>\n//   )\n// } \nexport default function App(){return/*#__PURE__*/React.createElement(ProvideAuth,null,/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(MainMenu,null),/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{path:\"/login\"},/*#__PURE__*/React.createElement(LoginPage,null)),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\"},/*#__PURE__*/React.createElement(Page1,null)),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/page2\"},/*#__PURE__*/React.createElement(Page2,null)),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/page3\"},/*#__PURE__*/React.createElement(Page3,null)),/*#__PURE__*/React.createElement(PrivateRoute,{path:\"/private\"},/*#__PURE__*/React.createElement(PrivatePage,null)),/*#__PURE__*/React.createElement(PrivateRoute,{path:\"/admin\",hasRole:'admin'},/*#__PURE__*/React.createElement(AdminPage,null)))));}","map":{"version":3,"sources":["C:/Users/Hugo/code/akatek/directual/directual-react-boilerplate/src/App.js"],"names":["React","BrowserRouter","Router","Switch","Route","Redirect","NavLink","useHistory","useLocation","MainMenu","ProvideAuth","useAuth","authContext","Page1","Page2","Page3","PrivatePage","AdminPage","LoginPage","PrivateRoute","children","hasRole","rest","auth","location","isAutorised","pathname","state","from","App"],"mappings":"0PAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,WAAP,CAEA,OACEC,aAAa,GAAIC,CAAAA,MADnB,CAEEC,MAFF,CAGEC,KAHF,CAIEC,QAJF,CAKEC,OALF,CAMEC,UANF,CAMcC,WANd,KAOO,kBAPP,CASA,OAASC,QAAT,KAAyB,wBAAzB,CACA,OAASC,WAAT,CAAsBC,OAAtB,CAA+BC,WAA/B,KAAkD,QAAlD,CAEA,MAAOC,CAAAA,KAAP,KAAkB,eAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,eAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,eAAlB,CACA,MAAOC,CAAAA,WAAP,KAAwB,qBAAxB,CACA,MAAOC,CAAAA,SAAP,KAAsB,mBAAtB,CACA,MAAOC,CAAAA,SAAP,KAAsB,eAAtB,CAEA,QAASC,CAAAA,YAAT,MAAsD,IAA9BC,CAAAA,QAA8B,MAA9BA,QAA8B,CAApBC,OAAoB,MAApBA,OAAoB,CAARC,IAAQ,0CACpD,GAAMC,CAAAA,IAAI,CAAGZ,OAAO,EAApB,CACA,mBACI,oBAAC,KAAD,kBACQW,IADR,EAEI,MAAM,CAAE,0BAAGE,CAAAA,QAAH,OAAGA,QAAH,OACJD,CAAAA,IAAI,CAACE,WAAL,IAAsBF,IAAI,CAACF,OAAL,CAAaA,OAAb,CAAtB,CACID,QADJ,CAEIG,IAAI,CAACE,WAAL,IAAsB,CAACF,IAAI,CAACF,OAAL,CAAaA,OAAb,CAAvB,cAA+C,+CAA/C,cACA,oBAAC,QAAD,EACI,EAAE,CAAE,CACAK,QAAQ,CAAE,QADV,CAEAC,KAAK,CAAE,CAAEC,IAAI,CAAEJ,QAAR,CAFP,CADR,EAJA,EAFZ,GADJ,CAiBD,CAED;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,cAAe,SAASK,CAAAA,GAAT,EAAe,CAC5B,mBACE,oBAAC,WAAD,mBACE,oBAAC,MAAD,mBACE,oBAAC,QAAD,MADF,cAEE,oBAAC,MAAD,mBAGE,oBAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,eACE,oBAAC,SAAD,MADF,CAHF,cAME,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,GAAlB,eACE,oBAAC,KAAD,MADF,CANF,cASE,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,QAAlB,eACE,oBAAC,KAAD,MADF,CATF,cAYE,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,QAAlB,eACE,oBAAC,KAAD,MADF,CAZF,cAiBE,oBAAC,YAAD,EAAc,IAAI,CAAC,UAAnB,eACE,oBAAC,WAAD,MADF,CAjBF,cAsBE,oBAAC,YAAD,EAAc,IAAI,CAAC,QAAnB,CAA4B,OAAO,CAAE,OAArC,eACE,oBAAC,SAAD,MADF,CAtBF,CAFF,CADF,CADF,CAoCD","sourcesContent":["import React from 'react';\r\nimport './App.css';\r\n\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Redirect,\r\n  NavLink,\r\n  useHistory, useLocation,\r\n} from 'react-router-dom'\r\n\r\nimport { MainMenu } from './components/menu/menu'\r\nimport { ProvideAuth, useAuth, authContext } from './auth'\r\n\r\nimport Page1 from './pages/Page1'\r\nimport Page2 from './pages/Page2'\r\nimport Page3 from './pages/Page3'\r\nimport PrivatePage from './pages/PrivatePage'\r\nimport AdminPage from './pages/AdminPage'\r\nimport LoginPage from './pages/login'\r\n\r\nfunction PrivateRoute({ children, hasRole, ...rest }) {\r\n  const auth = useAuth();\r\n  return (\r\n      <Route\r\n          {...rest}\r\n          render={({ location }) =>\r\n              auth.isAutorised() && auth.hasRole(hasRole) ? (\r\n                  children\r\n              ) : auth.isAutorised() && !auth.hasRole(hasRole) ? <div>Access denied</div> : (\r\n                  <Redirect\r\n                      to={{\r\n                          pathname: '/login',\r\n                          state: { from: location }\r\n                      }}\r\n                  />\r\n              )\r\n          }\r\n      />\r\n  )\r\n}\r\n\r\n// This is for pages like your.app/books/the-bible, wthere 'the-bible' in nan Object ID\r\n// \r\n// const Child = ({ match }) => {\r\n//   return (\r\n//   <div>Object ID: {match.params.id}</div>\r\n//   )\r\n// } \r\n\r\nexport default function App() {\r\n  return (\r\n    <ProvideAuth>\r\n      <Router>\r\n        <MainMenu />\r\n        <Switch>\r\n\r\n         {/* Public pages */}\r\n          <Route path=\"/login\">\r\n            <LoginPage />\r\n          </Route>\r\n          <Route exact path=\"/\">\r\n            <Page1 />\r\n          </Route>\r\n          <Route exact path=\"/page2\">\r\n            <Page2 />\r\n          </Route>\r\n          <Route exact path=\"/page3\">\r\n            <Page3 />\r\n          </Route>\r\n          \r\n          {/* Pages for any authorised user */}\r\n          <PrivateRoute path=\"/private\">\r\n            <PrivatePage />\r\n          </PrivateRoute>\r\n          \r\n          {/* Pages for users, who have role == 'admin'. You can apply any other value here */}\r\n          <PrivateRoute path=\"/admin\" hasRole={'admin'}>\r\n            <AdminPage />\r\n          </PrivateRoute>\r\n\r\n          {/* This is for pages like your.app/books/the-bible, wthere 'the-bible' in an Object ID */}\r\n          {/* <Route exact path=\"/table/:id\" component={Child}/> */}\r\n        </Switch>\r\n      </Router>\r\n    </ProvideAuth>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}